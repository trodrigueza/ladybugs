<!DOCTYPE html>
<html class="light" lang="es">
<head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>GluteOS - Iniciar Sesión</title>

  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@200;300;400;500;600;700;800&display=swap" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>

  <script id="tailwind-config">
    tailwind.config = {
      darkMode: "class",
      theme: {
        extend: {
          colors: {
            primary: { DEFAULT: "#0f49bd", dark: "#1e3a8a" },
            "background-light": "#ffffff",
            "background-dark": "#101622",
            "text-light-primary": "#101622",
            "text-dark-primary": "#f6f6f8",
            "text-light-secondary": "#6b7280",
            "text-dark-secondary": "#9ca3af",
            "border-light": "#e5e7eb",
            "border-dark": "#374151"
          },
          fontFamily: {
            display: ["Manrope", "sans-serif"]
          }
        }
      }
    }
  </script>
</head>

<body class="font-display bg-background-light dark:bg-background-dark text-text-light-primary dark:text-text-dark-primary">

  <div class="relative flex h-auto min-h-screen w-full flex-col items-center justify-center overflow-x-hidden p-4">

    <div class="w-full max-w-sm">

      <!-- LOGO + TITULO -->
      <div class="flex flex-col items-center justify-center text-center mb-8">
        <div class="flex items-center gap-3 text-primary">
          <span class="material-symbols-outlined text-4xl">exercise</span>
          <h1 class="text-3xl font-bold">GluteOS</h1>
        </div>
        <p class="text-text-light-secondary dark:text-text-dark-secondary mt-2">Bienvenido de nuevo</p>
      </div>

      <!-- MENSAJES del backend -->
      {% if messages %}
      <div id="messages-container" class="mb-4 space-y-2">
        {% for message in messages %}
          <div class="p-3 rounded-lg text-sm {% if message.tags == 'success' %}bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-300 border border-green-200 dark:border-green-800{% elif message.tags == 'error' %}bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-300 border border-red-200 dark:border-red-800{% else %}bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-300 border border-blue-200 dark:border-blue-800{% endif %} message-alert">
            {{ message }}
          </div>
        {% endfor %}
      </div>
      {% endif %}




      <!-- FORMULARIO REAL -->
      <form method="POST" action="{% url 'login' %}" class="flex flex-col gap-4">
        {% csrf_token %}


        <!-- NUEVO CAMPO: Rol -->
        <div class="flex flex-col gap-1.5">
          <label class="text-sm font-medium text-text-light-primary dark:text-text-dark-primary" for="role">Rol</label>
          <select id="role" name="role"
            class="form-select w-full rounded-lg border-border-light dark:border-border-dark bg-background-light dark:bg-background-dark text-text-light-primary dark:text-text-dark-primary focus:border-primary focus:ring-primary/50">
            <option value="">Selecciona tu rol</option>
            <option value="entrenador">Entrenador</option>
            <option value="administrativo">Administrativo</option>
            <option value="socio">Socio</option>
          </select>
        </div>


        <!-- Campo: Email -->
        <div class="flex flex-col gap-1.5">
          <label class="text-sm font-medium" for="email">Correo</label>
          <input class="form-input w-full rounded-lg border-border-light dark:border-border-dark 
                      bg-background-light dark:bg-background-dark text-text-light-primary dark:text-text-dark-primary 
                      focus:border-primary focus:ring-primary/50"
                 id="email"
                 name="email"
                 placeholder="tu@email.com"
                 type="email"
                 value="{{ email|default:'' }}"
                 required />
        </div>

        <!-- Campo: Contraseña -->
        <div class="flex flex-col gap-1.5">
          <label class="text-sm font-medium" for="password">Contraseña</label>
          <input class="form-input w-full rounded-lg border-border-light dark:border-border-dark 
                      bg-background-light dark:bg-background-dark text-text-light-primary dark:text-text-dark-primary 
                      focus:border-primary focus:ring-primary/50"
                 id="password"
                 name="password"
                 placeholder="••••••••"
                 type="password"
                 required />
        </div>

        <!-- BOTÓN -->
        <button type="submit"
                class="flex w-full items-center justify-center rounded-lg bg-primary py-2.5 px-4 
                       text-sm font-semibold text-white transition-colors hover:bg-primary-dark 
                       focus:outline-none focus:ring-2 focus:ring-primary/50 focus:ring-offset-2">
          Iniciar Sesión
        </button>
      </form>

      <!-- LINKS -->
      <div class="mt-6 text-center text-sm">
        <a class="font-medium text-primary hover:underline" href="#">¿Olvidé mi contraseña?</a>
      </div>

    </div>
  </div>

  <script>
    // Auto-ocultar mensajes después de 5 segundos
    document.addEventListener('DOMContentLoaded', function() {
      const messages = document.querySelectorAll('.message-alert');
      if (messages.length > 0) {
        setTimeout(function() {
          messages.forEach(function(message) {
            message.style.transition = 'opacity 0.5s ease-out';
            message.style.opacity = '0';
            setTimeout(function() {
              message.remove();
            }, 500);
          });
        }, 5000); // 5 segundos
      }
    });
  </script>

</body>
</html>
