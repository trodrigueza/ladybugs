{% load static %}
<!doctype html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Detalle de Sesión - Sistema de Gimnasio</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
</head>

<body class="font-['Inter'] bg-gradient-to-br from-slate-50 to-blue-50 min-h-screen">
  <div class="container mx-auto px-4 py-8 max-w-4xl">
    <!-- Header -->
    <div class="mb-6">
      <a href="{% url 'mi_rutina' %}" class="inline-flex items-center gap-2 text-blue-600 hover:text-blue-700 mb-4">
        <span class="material-symbols-outlined">arrow_back</span>
        <span>Volver a Mi Rutina</span>
      </a>
      <h1 class="text-3xl font-bold text-slate-900">Detalle de Sesión</h1>
    </div>

    <!-- Sesión Info Card -->
    <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
      <div class="flex items-start justify-between mb-6">
        <div>
          <h2 class="text-2xl font-semibold text-slate-900 mb-2">
            {% if sesion.EsEntrenamientoLibre %} Entrenamiento Libre {% else %} {{ sesion.RutinaID.Nombre }} {% endif %}
          </h2>
          <p class="text-slate-600">
            {{ sesion.FechaInicio|date:"l, d \d\e F \d\e Y \a \l\a\s H:i" }}
          </p>
        </div>
        <div class="text-right">
          <div class="text-3xl font-bold text-blue-600">
            {{ sesion.DuracionMinutos }}
          </div>
          <div class="text-sm text-slate-600">minutos</div>
        </div>
      </div>

      {% if sesion.NotasSesion %}
      <div class="bg-amber-50 border border-amber-200 rounded-lg p-4 mb-4">
        <h3 class="font-semibold text-amber-900 mb-2 flex items-center gap-2">
          <span class="material-symbols-outlined">note</span>
          Notas de la sesión
        </h3>
        <p class="text-amber-800 whitespace-pre-wrap">
          {{ sesion.NotasSesion }}
        </p>
      </div>
      {% endif %}
    </div>

    <!-- Ejercicios Completados -->
    {% if not sesion.EsEntrenamientoLibre %}
    <div class="bg-white rounded-xl shadow-lg p-6">
      <h3 class="text-xl font-semibold text-slate-900 mb-4">
        Ejercicios Realizados
      </h3>

      {% if ejercicios %}
      <div class="space-y-3">
        {% for ej in ejercicios %}
        <div
          class="flex items-center gap-3 p-3 rounded-lg {% if ej.Completado %}bg-green-50 border border-green-200{% else %}bg-slate-50 border border-slate-200{% endif %}">
          <div class="flex-1">
            <div class="font-medium text-slate-900">
              {{ ej.nombre_ejercicio }}
            </div>
            <div class="text-sm text-slate-600">{{ ej.detalle_texto }}</div>
          </div>
        </div>
        {% endfor %}
      </div>

      <!-- Resumen -->
      <div class="mt-6 pt-6 border-t border-slate-200">
        <div class="grid grid-cols-2 gap-4 text-center">
          <div>
            <div class="text-2xl font-bold text-green-600">
              {{ completados_count }}
            </div>
            <div class="text-sm text-slate-600">Completados</div>
          </div>
          <div>
            <div class="text-2xl font-bold text-slate-400">
              {{ pendientes_count }}
            </div>
            <div class="text-sm text-slate-600">Pendientes</div>
          </div>
        </div>
      </div>
      {% else %}
      <p class="text-center text-slate-600 py-8">
        No se registraron ejercicios en esta sesión.
      </p>
      {% endif %}
    </div>
    {% endif %}
  </div>
</body>

</html>